<script>
    (function () {

        var orig_propertyChanged = Polymer.Dart.InteropBehavior._propertyChanged;
        /*
        Polymer.Dart.InteropBehavior._propertyChanged = function (path, newValue, oldValue) {
            if (this.isAutonotify) {
                return;
            }
            orig_propertyChanged.call(this,path,newValue,oldValue);
        };
*/
        Polymer.Dart.AutoNotify = {
            applySplice: function(ar,splices) {
                //console.log("APPLY SPLICE");
                //console.dir(splices);
                return {
                    keySplices: Polymer.Collection.applySplices(ar, splices),
                    indexSplices: splices
                };
            },
            updateJsVersion: function(js) {
              // Placeholder for readability : real one defined in dart
            },
            collectNotified: function(el) {
                // Placeholder for readability : real one defined in dart
            },
            Behavior: {

                _resolveModel: function(path) {
                    var parts = this._getPathParts(path);
                    var prop = parts.splice(parts.length - 1, 1)[0];

                    // Get the model which is being updated.
                    return this.get(parts);
                },

                _propertyChanged: function (path, newValue, oldValue) {
                    if (path.length>8 && path.indexOf(".splices",path.length-8) == path.length - 8) {
                        //console.log("CH:"+path+" NEW VL: "+newValue+" OLD: "+oldValue);

                        // Inform DART that polymer already notified that.




                        if (Polymer.Dart.AutoNotify.collectNotified(this,path)) {
                            //console.log("Coming from DART, do not reapply, pleaz.");
                            newValue._applied = true;

                        } else {
                            //console.log("UPDATING JS VERSION OF "+path);
                            Polymer.Dart.AutoNotify.updateJsVersion(this._resolveModel(path));
                        }
                    }
                    Polymer.Dart.InteropBehavior._propertyChanged.call(
                            this, path, newValue, oldValue);
                }
            }
        };
    })();
</script>
